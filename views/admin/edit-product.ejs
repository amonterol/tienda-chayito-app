

<%- include("../includes/head.ejs") %>

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
  />
  </head>
  <body>
    <%- include("../includes/navigation.ejs") %>
    <main class="container"> 
         <div class="columns mt-4"> 
            <div class="column is-half is-offset-one-quarter "> 

              <% if (errorMessage) { %>
                <div class="notification is-warning m-auto" >
                  <button class="delete" onclick="this.parentElement.style.display='none'" ></button>
                  <%= errorMessage %>
                </div>
                
                <% } %>  
              
              <form  action="/admin/edit-product" method="POST" novalidate>

                <div class="field">
                  <label class="label"for="nombre">Nombre</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'title') ? 'input  is-danger has-background-grey-light' : 'input ' %>"
                      type="text"
                      name="title"  
                      id="title"  
                      value="<%  if (!hasError) { %>  <%=  product.title %> <% } else { %>  <%=  oldInput.title %> <% } %>" 
                      required
                      />
                  </div>
                </div>
                <div class="field">
                  <label class="label"for="nombre">SKU</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'sku') ? 'input  is-danger has-background-grey-light' : 'input ' %>"
                      type="text"
                      name="sku"  
                      id="sku"  
                      value="<%  if (!hasError) { %>  <%=  product.sku %> <% } else { %>  <%=  oldInput.sku %> <% } %>" 
                      required
                      />
                  </div>
                </div>

           
               
                <div class="field">
                  <label class="label" for="imageUrl">Imagen Url</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'imageUrl') ? 'input  is-danger has-background-grey-light' : 'input ' %>" 
                      type="text" 
                      name="imageUrl"  
                      value="<%  if (!hasError) { %>  <%=  product.imageUrl %> <% } else { %>  <%=  oldInput.imageUrl %> <% } %>" 
                      id="imageUrl"  
                      required
                    />
                  </div>
                </div>
               
                <div class="field">
                  <label class="label" for="price">Precio</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'price') ? 'input  is-danger has-background-grey-light' : 'input ' %>"
                      type="text" 
                      name="price"  
                      id="price"  
                      value="<%  if (!hasError) { %>  <%=  product.price %> <% } else { %>  <%=  oldInput.price %> <% } %>" 
                      required
                    />
                  </div>
                </div>

                <div class="field">
                  <label class="label" for="category">Categoría</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'category') ? 'input  is-danger has-background-grey-light' : 'input ' %>"
                      type="text" 
                      name="category"  
                      id="category" 
                      value="<%  if (!hasError) { %>  <%=  product.category %> <% } else { %>  <%=  oldInput.category %> <% } %>" 
                    required
                    />
                  </div>
                </div>
                
                <div class="field">
                  <label class="label" for="subcategory">Subcategoría</label>
                  <div class="control">
                    <input 
                      class="<%=  validationErrors.find(e => e.param === 'subcategory') ? 'input  is-danger has-background-grey-light' : 'input ' %>" 
                      type="text" 
                      name="subcategory"  
                      id="subcategory" 
                      value="<%  if (!hasError) { %>  <%=  product.subcategory %> <% } else { %>  <%=  oldInput.subcategory %> <% } %>" 
                      required
                    />
                  </div>
                </div>

                <div class="field">
                  <label class="label" for="description">Descripción</label>
                  <div class="control">
                    <textarea  
                      class="<%=  validationErrors.find(e => e.param === 'description') ? 'input  is-danger has-background-grey-light' : 'input ' %>"
                      placeholder="5 lines of textarea" 
                      rows="5" 
                      name="description"  
                      id="description"
                    >
                      <%  if (!hasError) { %>  <%=  product.description %> <% } else { %>  <%=  oldInput.description %> <% } %>
                    </textarea>
                  </div>
                </div>

                <div class="field is-grouped">
                  <div class="control">
                    <input 
                      type="hidden" 
                      value="<%  if (!hasError) { %>  <%=  product._id %> <% } else { %>  <%=  oldInput._id %> <% } %>"      
                      name="productId" 
                      id="productId">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <button class="button is-link is-light" type="submit">Actualizar</button>
                  </div>
                  <div class="control">
                    <a href="/admin/products" class="button is-link is-light" type="submit">Cancelar</a>
                  </div>
                </div>
                
              </form>
            </div>
          </div>
        </div>
      </main>
    
    <%- include("../includes/end.ejs") %>